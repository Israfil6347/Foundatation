import{q as B,r as b,j as e,Y as w,y as v}from"./app-PNeZ1Cfk.js";import{B as m,Q as T,A as E}from"./AuthenticatedLayout-DwOvV4UU.js";import{M as u}from"./MyTextInput-BsXyH_dz.js";import{s as D,M as Y,R as A,m as H,f as M}from"./QuillSetting-SGFdbt0p.js";import{d as F}from"./index-BrDfU8kz.js";import{u as Q}from"./useCreatePageInputState-BY8yitpf.js";import{S as c}from"./sweetalert2.esm.all-DcsrUi1N.js";import{m as R}from"./motion-DUcTn-y-.js";function K({auth:y}){var f,h,g;const{pageView:t,id:x,flash:n}=B().props,d=s=>{var i;const l=(i=s==null?void 0:s.method)==null?void 0:i.toLowerCase();F.Inertia[l](s==null?void 0:s.url)};console.log(t);const{createPageInputState:r,setCreatePageInputState:q,updateCreatePageInputState:a,clearCreatePageState:L}=Q();b.useEffect(()=>{var s,l,i,o,j,p;(t==null?void 0:t.data)!==""&&(a("title",(s=t==null?void 0:t.data)==null?void 0:s.title),a("slug",(l=t==null?void 0:t.data)==null?void 0:l.slug),a("order",(i=t==null?void 0:t.data)==null?void 0:i.order),a("shortDescription",(o=t==null?void 0:t.data)==null?void 0:o.subtitle),a("content",(j=t==null?void 0:t.data)==null?void 0:j.body),a("image",(p=t==null?void 0:t.data)==null?void 0:p.attachment_url))},[t]);const N=s=>{s.preventDefault();const l=new FormData(s.currentTarget);l.append("body",r==null?void 0:r.content);const i=Object.fromEntries(l);v.post(route("pages.update",x),i,{onSuccess:o=>{console.log(o),m(o)}})};b.useEffect(()=>{n.message&&m.success(n.message),n.error&&m.error(n.error)},[n]);const C=s=>{v.delete(route("pages.removeImage",s)),console.log(s)};return e.jsxs(e.Fragment,{children:[e.jsx(T,{}),e.jsxs(E,{user:y.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Home"}),children:[e.jsx(w,{title:"Page View"}),e.jsx("div",{}),e.jsxs(R.div,{initial:{opacity:1,x:"100vw",skewX:"-30deg"},animate:{x:0,y:0,skewX:"0deg",opacity:1,transition:{velocity:10}},className:"m-2 h-[calc(100vh-130px)] w-[calc(100vw-74px)] rounded bg-surface p-2 shadow-sm ",children:[e.jsxs("div",{className:"rounded-none",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between gap-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:"Page Edit"}),e.jsx("p",{className:"mt-1 font-normal",children:"Edit page details"})]}),e.jsx("div",{className:"flex shrink-0 flex-col gap-2 sm:flex-row",children:(h=(f=t==null?void 0:t.data)==null?void 0:f.links)==null?void 0:h.map((s,l)=>s.label==="Edit Page"?null:e.jsxs("button",{className:"flex items-center gap-3 rounded bg-primary px-4 py-2 text-onPrimary",onClick:i=>{s.rel==="destroy"?c.fire({title:"Are you sure?",text:"You won't delate this page!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(o=>{o.isConfirmed&&(d(s),c.fire("Deleted!","Your file has been deleted.","success"))}):s.rel==="PublishLink"?c.fire({title:"Are you sure?",text:"You won't publish this page!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!"}).then(o=>{o.isConfirmed&&d(s)}):s.rel==="draft"?c.fire({title:"Are you sure?",text:"You won't draft this page!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!"}).then(o=>{o.isConfirmed&&d(s)}):d(s)},children:[e.jsx("i",{className:s.icon}),s.label]}))})]}),e.jsx("div",{})]}),e.jsx("div",{children:e.jsx("div",{className:"w-full  bg-surface px-6 py-6  lg:px-20",style:{maxHeight:"calc(100vh - 205px)"},children:e.jsxs("form",{onSubmit:N,children:[e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:e.jsx("div",{className:"flex justify-between",children:r!=null&&r.image?e.jsx("div",{className:"border-4 border-dashed border-gray-400 h-44 w-44 bg-surface hover:border-primary hover:bg-gray-100",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute right-2 top-1",onClick:()=>{C(x)},children:e.jsx("i",{class:"fa-solid fa-trash-can text-red-700"})}),e.jsx("div",{children:e.jsx("img",{src:r.image,className:"h-full p-2",alt:""})})]})}):e.jsx("div",{children:e.jsx("input",{type:"file",name:"attachment"})})})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 pt-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(u,{label:"Page Title",name:"title",value:r.title,inputType:"text",leftIcon:e.jsx("i",{className:"fa-solid fa-heading"}),id:"title",onChangeHandler:s=>{a(s.target.name,s.target.value),a("slug",D(s.target.value))}}),e.jsx(u,{label:"Page Slug",name:"slug",value:r==null?void 0:r.slug,inputType:"text",leftIcon:e.jsx("i",{className:"fa-solid fa-link"}),id:"slug"}),e.jsx(u,{label:"Page Order",name:"order",disabled:!1,value:(g=r==null?void 0:r.order)==null?void 0:g.toString(),inputType:"number",leftIcon:e.jsx("i",{className:"fa-solid fa-arrow-down-1-9"}),onChangeHandler:s=>{a(s.target.name,s.target.value)},id:"order"})]}),e.jsx("div",{className:"mt-4 grid grid-cols-1",children:e.jsx(Y,{label:"Short Description",name:"subtitle",value:r==null?void 0:r.shortDescription,rows:4,onChange:s=>{a("shortDescription",s.target.value)}})}),e.jsxs("div",{className:" mt-2 grid  grid-cols-1 ",children:[e.jsx("label",{htmlFor:"content",children:"Content"}),e.jsx(A,{theme:"snow",id:"content",name:"content",modules:H,formats:M,value:r!=null&&r.content?r==null?void 0:r.content:"",onChange:s=>{a("content",s)}})]}),e.jsx("div",{className:"flex mt-12  items-center justify-end gap-4 bg-surface py-2 ",children:(t==null?void 0:t.update)&&e.jsxs("button",{type:"submit",className:"flex items-center rounded bg-lime-600 hover:bg-lime-700 px-4 py-2 text-onPrimary",children:[e.jsx("i",{className:"fa-solid fa-pen-to-square"}),t.update.label]})})]})})})]})]})]})}export{K as default};
