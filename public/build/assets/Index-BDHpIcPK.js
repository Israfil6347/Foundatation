import{q as A,D as u,r as f,j as e,Y as E,y as i}from"./app-PNeZ1Cfk.js";import{r as h}from"./index-DEIfaFVs.js";import{B as g,Q as L,A as T}from"./AuthenticatedLayout-DwOvV4UU.js";import{S as d}from"./sweetalert2.esm.all-DcsrUi1N.js";import{M as Y}from"./MyPagination-DMpc4kbm.js";import{d as O}from"./index-BrDfU8kz.js";import{m as $}from"./motion-DUcTn-y-.js";const p=["Title","Slug","Order","Status","Action"],Q={openDialog:!1,dialogLink:null,text:""};function U({auth:b}){var m,x;const{pages:t,flash:o}=A().props,[a,j]=u(Q),[H,w]=u(),l=(s,n)=>{j(c=>({...c,[s]:n}))},N=s=>{i.get(s)},y=s=>{i.get(s)},v=s=>{i.delete(s)},P=s=>{i.patch(s)},D=s=>{i.get(s.url)};f.useEffect(()=>{o.message&&g.success(o.message),o.error&&g.error(o.error)},[o]);const C=s=>{O.Inertia.get(`/pages?page=${s}`)};return f.useEffect(()=>{a.openDialog&&d.fire({title:"Are you sure?",text:`You won't ${a.text} this page!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!"}).then(s=>{s.isConfirmed&&(P(a.dialogLink),d.fire(`${a.text}`,`Your file has been ${a.text}.`,"success"))})},[a]),console.log(t),console.log((m=t==null?void 0:t.meta)==null?void 0:m.current_page),e.jsxs(e.Fragment,{children:[e.jsx(L,{}),e.jsxs(T,{user:b.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Home"}),children:[e.jsx(E,{title:"Page"}),e.jsxs($.div,{initial:{opacity:1,x:"100vw",skewX:"-30deg"},animate:{x:0,y:0,skewX:"0deg",opacity:1,transition:{velocity:10}},className:"m-2 h-[calc(100vh-130px)] w-[calc(100vw-74px)] rounded bg-surface p-2 shadow-sm ",children:[e.jsxs("div",{className:"rounded-none",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between gap-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:"All Pages"}),e.jsx("p",{className:"mt-1 font-normal",children:"List of all pages"})]}),e.jsx("div",{className:"flex shrink-0 flex-col gap-2 sm:flex-row",children:(t==null?void 0:t.createNew)&&e.jsxs("button",{className:"flex items-center gap-3 rounded bg-primary px-4 py-2 text-onPrimary",onClick:()=>{D(t.createNew)},children:[e.jsx("i",{className:"fa-brands fa-page4"}),t.createNew.label]})})]}),e.jsx("div",{className:"my-2 flex flex-col items-center justify-between gap-4 md:flex-row",children:e.jsx("div",{className:"w-full md:w-72",children:e.jsx("form",{action:""})})})]}),e.jsxs("div",{className:"overflow-scroll px-0",children:[e.jsx("div",{className:"h-[calc(100vh-430px)] overflow-auto md:h-[calc(100vh-350px)]",children:e.jsxs("table",{className:"whitespace-no-wrap relative w-full table-auto border-collapse border",children:[e.jsx("thead",{className:"w-full",children:e.jsx("tr",{className:"sticky -top-0 hidden h-14 w-full shadow-sm md:table-row",children:p.map((s,n)=>e.jsx("th",{className:"cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50  p-4 transition-colors hover:bg-blue-gray-50 ",children:e.jsxs(h.Typography,{variant:"small",color:"blue-gray",className:"flex items-center justify-between gap-2 font-normal leading-none ",children:[s,n!==p.length-1&&e.jsx("i",{className:"fa-solid fa-up-down"})]})},s))})}),e.jsx("tbody",{className:"flex-1 sm:flex-none",children:t&&t.data.map((s,n)=>{var c;return e.jsxs("tr",{className:"flex w-full flex-col flex-wrap border-b border-blue-gray-50 last:border-b-0 even:bg-blue-gray-600/5 md:table-row",children:[e.jsxs("td",{className:"border px-2",children:[e.jsx("label",{className:"md:hidden",children:"Title"}),e.jsx("p",{className:"font-semibold md:font-normal",children:s.title})]}),e.jsxs("td",{className:"border px-2",children:[e.jsx("label",{className:"md:hidden",children:"Slug"}),e.jsx("p",{className:"font-semibold md:font-normal",children:s.slug})]}),e.jsxs("td",{className:"border px-2",children:[e.jsx("label",{className:"md:hidden",children:"Order"}),e.jsx("p",{className:"font-semibold md:font-normal",children:s.order})]}),e.jsxs("td",{className:"border px-2",children:[e.jsx("label",{className:"md:hidden",children:"Status"}),e.jsx("span",{className:`w-fit rounded-md ${s.publishStatus!=="Published"?"bg-orange-600 ":"bg-green-600 "} py-0.5 px-1 text-white shadow`,children:s.publishStatus})]}),e.jsx("td",{className:"h-full border px-2",children:e.jsx("div",{className:"flex h-full ]",children:(c=s.links)==null?void 0:c.map((r,B)=>r?e.jsx(h.Tooltip,{content:r.label,children:e.jsx("button",{className:"p-2",variant:"text",onClick:()=>{r.rel==="show"&&N(r.url),r.rel==="update"&&(console.log(r),y(r.url)),r.rel==="draft"&&(l("openDialog",!0),l("dialogLink",r.url),l("text","Draft")),r.rel==="PublishLink"&&(l("openDialog",!0),l("dialogLink",r.url),l("text","Publish")),r.rel==="destroy"&&d.fire({title:"Are you sure?",text:"You won't delate this page!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(S=>{S.isConfirmed&&(v(r.url),d.fire("Deleted!","Your file has been deleted.","success"))})},children:e.jsx("i",{className:`text-xl text-primary dark:text-white ${r.icon}`})})},B):null)})})]},n)})})]})}),e.jsx(Y,{currentPage:(x=t==null?void 0:t.meta)==null?void 0:x.current_page,meta:t==null?void 0:t.meta,setCurrentPage:w,handlePageChange:C})]})]})]})]})}export{U as default};
